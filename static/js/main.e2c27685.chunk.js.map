{"version":3,"sources":["api/streams.js","history.js","actions/index.js","components/streams/StreamForm.js","components/streams/StreamCreate.js","components/streams/StreamEdit.js","components/Modal.js","components/streams/StreamDelete.js","components/streams/StreamList.js","components/streams/StreamShow.js","components/GoogleAuth.js","components/Header.js","components/App.js","reducers/authReducer.js","reducers/index.js","reducers/streamReducer.js","index.js"],"names":["axios","create","baseURL","createBrowserHistory","fetchStream","id","dispatch","a","streams","get","response","type","payload","data","StreamForm","renderInput","input","label","meta","className","error","touched","autoComplete","renderError","onSubmit","formValues","props","this","handleSubmit","Field","name","component","React","Component","reduxForm","form","validate","errors","title","description","StreamCreate","createStream","connect","getState","userId","auth","post","history","push","StreamEdit","editStream","match","params","stream","initialValues","_","pick","state","ownProps","patch","Modal","ReactDOM","createPortal","onClick","onDismiss","e","stopPropagation","content","actions","document","querySelector","StreamDelete","Fragment","deleteStream","to","renderContent","renderActions","delete","StreamList","fetchStreams","currentUserId","map","key","renderAdmin","isSignedIn","style","textAlign","renderList","renderCreate","Object","values","StreamShow","videoRef","createRef","buildPlayer","player","destroy","palyer","flv","createPlayer","url","attachMediaElement","current","load","ref","width","controls","GoogleAuth","onAuthChange","signIn","currentUser","getId","signOut","onSignInClick","onSignOutClick","window","gapi","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","Header","App","path","exact","INITIAL_STATE","combineReducers","action","formReducer","mapKeys","omit","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render"],"mappings":"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","file":"static/js/main.e2c27685.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  baseURL: 'http://localhost:3001'\r\n});\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport default createBrowserHistory();\r\n","import streams from '../api/streams';\r\nimport history from '../history';\r\n\r\nexport const signIn = userId => {\r\n  return {\r\n    type: 'SIGN_IN',\r\n    payload: userId\r\n  };\r\n};\r\n\r\nexport const signOut = () => {\r\n  return {\r\n    type: 'SIGN_OUT'\r\n  };\r\n};\r\n\r\nexport const createStream = formValues => async (dispatch, getState) => {\r\n  const { userId } = getState().auth;\r\n  const response = await streams.post('/streams', { ...formValues, userId });\r\n\r\n  dispatch({ type: 'CREATE_STREAM', payload: response.data });\r\n  history.push('/');\r\n};\r\n\r\nexport const fetchStreams = () => async dispatch => {\r\n  const response = await streams.get('/streams');\r\n\r\n  dispatch({ type: 'FETCH_STREAMS', payload: response.data });\r\n};\r\n\r\nexport const fetchStream = (id) => async dispatch => {\r\n  const response = await streams.get(`/streams/${id}`);\r\n\r\n  dispatch({ type: 'FETCH_STREAM', payload: response.data });\r\n};\r\n\r\nexport const editStream = (id, formValues) => async dispatch => {\r\n  const response = await streams.patch(`/streams/${id}`, formValues);\r\n\r\n  dispatch({ type: 'EDIT_STREAM', payload: response.data });\r\n  history.push('/');\r\n};\r\n\r\nexport const deleteStream = (id) => async dispatch => {\r\n  await streams.delete(`/streams/${id}`);\r\n\r\n  dispatch({ type: 'DELETE_STREAM', payload: id });\r\n  history.push('/');\r\n};\r\n","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\nclass StreamForm extends React.Component {\r\n  renderError({ error, touched }) {\r\n    if (touched && error) {\r\n      return (\r\n        <div className=\"ui error message\">\r\n          <div className=\"header\">{error}</div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderInput = ({ input, label, meta }) => {\r\n    const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n\r\n    return (\r\n      <div className={className}>\r\n        <label>{label}</label>\r\n        <input {...input} autoComplete=\"off\" />\r\n        {this.renderError(meta)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onSubmit = (formValues) => {\r\n    this.props.onSubmit(formValues);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit(this.onSubmit)} className=\"ui form error\">\r\n        <Field name=\"title\" component={this.renderInput} label=\"Enter Title\" />\r\n        <Field name=\"description\" component={this.renderInput} label=\"Enter Description\" />\r\n        <button className=\"ui button primary\">Submit</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst validate = formValues => {\r\n  const errors = {};\r\n\r\n  if (!formValues.title) {\r\n    errors.title = 'You must enter a title';\r\n  }\r\n\r\n  if (!formValues.description) {\r\n    errors.description = 'You must enter a description';\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport default reduxForm({\r\n  form: 'streamForm',\r\n  validate: validate\r\n})(StreamForm);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\n\r\nclass StreamCreate extends React.Component {\r\n  onSubmit = (formValues) => {\r\n    this.props.createStream(formValues);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3>Create a Stream</h3>\r\n        <StreamForm onSubmit={this.onSubmit} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(null, { createStream })(StreamCreate);\r\n","import _ from 'lodash';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream, editStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\n\r\nclass StreamEdit extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchStream(this.props.match.params.id);\r\n  }\r\n\r\n  onSubmit = (formValues) => {\r\n    this.props.editStream(this.props.match.params.id, formValues);\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.stream) {\r\n      return <div>Loading...</div>;\r\n    }\r\n    return (\r\n      <div>\r\n        <h3>Edit a Stream</h3>\r\n        <StreamForm initialValues={_.pick(this.props.stream, 'title', 'description')} onSubmit={this.onSubmit} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return { stream: state.streams[ownProps.match.params.id] };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream, editStream })(StreamEdit);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst Modal = props => {\r\n  return ReactDOM.createPortal(\r\n    <div onClick={props.onDismiss} className=\"ui dimmer modals visible active\">\r\n      <div onClick={(e) => e.stopPropagation()} className=\"ui standard modal visible active\">\r\n        <div className=\"header\">{props.title}</div>\r\n        <div className=\"content\">{props.content}</div>\r\n        <div className=\"actions\">{props.actions}</div>\r\n      </div>\r\n    </div>,\r\n    document.querySelector('#modal')\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '../Modal';\r\nimport history from '../../history';\r\nimport { fetchStream, deleteStream } from '../../actions';\r\n\r\nclass StreamDelete extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchStream(this.props.match.params.id)\r\n  }\r\n\r\n  renderActions() {\r\n    const { id } = this.props.match.params;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <button onClick={() => this.props.deleteStream(id)} className=\"ui button negative\">Delete</button>\r\n        <Link to=\"/\" className=\"ui button\">Cancel</Link>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  renderContent() {\r\n    if (!this.props.stream) {\r\n      return 'Are you sure you want to delete this stream?'\r\n    }\r\n\r\n    return `Are you sure you want to delete this stream with title: ${this.props.stream.title}`\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        title=\"Delete Stream\"\r\n        content={this.renderContent()}\r\n        actions={this.renderActions()}\r\n        onDismiss={() => history.push('/')}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n return { stream: state.streams[ownProps.match.params.id] }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream, deleteStream })(StreamDelete);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchStreams } from '../../actions';\r\n\r\nclass StreamList extends React.Component {\r\n  componentDidMount() {\r\n    this.props.fetchStreams();\r\n  }\r\n\r\n  renderAdmin(stream) {\r\n    if (stream.userId === this.props.currentUserId) {\r\n      return (\r\n        <div className=\"right floated content\">\r\n          <Link to={`/streams/edit/${stream.id}`} className=\"ui button primary\">Edit</Link>\r\n          <Link to={`/streams/delete/${stream.id}`} className=\"ui button negative\">Delete</Link>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderList() {\r\n    return this.props.streams.map(stream => {\r\n      return (\r\n        <div className=\"item\" key={stream.id}>\r\n          {this.renderAdmin(stream)}\r\n          <i className=\"large middle aligned icon camera\" />\r\n          <div className=\"content\">\r\n            <Link to={`/streams/${stream.id}`} className=\"header\">{stream.title}</Link>\r\n            <div className=\"description\">{stream.description}</div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderCreate() {\r\n    if (this.props.isSignedIn) {\r\n      return (\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Link to=\"/streams/new\" className=\"ui button primary\">\r\n            Create Stream\r\n          </Link>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Streams</h2>\r\n        <div className=\"ui celled list\">{this.renderList()}</div>\r\n        {this.renderCreate()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n     streams: Object.values(state.streams),\r\n     currentUserId: state.auth.userId,\r\n     isSignedIn: state.auth.isSignedIn\r\n   };\r\n};\r\n\r\nexport default connect( mapStateToProps, { fetchStreams })(StreamList);\r\n","import React from 'react';\r\nimport flv from 'flv.js';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream } from '../../actions';\r\n\r\nclass StreamShow extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.videoRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n\r\n    this.props.fetchStream(id);\r\n    this.buildPlayer();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.buildPlayer();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.player.destroy();\r\n  }\r\n\r\n  buildPlayer() {\r\n    if(this.palyer || !this.props.stream) {\r\n      return;\r\n    }\r\n\r\n    const { id } = this.props.match.params;\r\n    this.player = flv.createPlayer({\r\n      type: 'flv',\r\n      url: `http://localhost:8000/live/${id}.flv`\r\n    });\r\n    this.player.attachMediaElement(this.videoRef.current);\r\n    this.player.load();\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.stream) {\r\n      return <div>Loading...</div>;\r\n    }\r\n\r\n    const { title, description } = this.props.stream;\r\n\r\n    return (\r\n      <div>\r\n        <video ref={this.videoRef} style={{ width: '100%' }} controls />\r\n        <h1>{title}</h1>\r\n        <h5>{description}</h5>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return { stream: state.streams[ownProps.match.params.id] };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStream })(StreamShow);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signIn, signOut } from '../actions';\r\n\r\nclass GoogleAuth extends React.Component {\r\n  componentDidMount() {\r\n    window.gapi.load('client:auth2', () => {\r\n      window.gapi.client.init({\r\n        clientId: '814408171445-1umhm3tt984epjc3euqt8d4sgbceagte.apps.googleusercontent.com',\r\n        scope: 'email'\r\n      }).then(() => {\r\n        this.auth = window.gapi.auth2.getAuthInstance();\r\n\r\n        this.onAuthChange(this.auth.isSignedIn.get());\r\n        this.auth.isSignedIn.listen(this.onAuthChange);\r\n      });\r\n    });\r\n  }\r\n\r\n  onAuthChange = isSignedIn => {\r\n    if (isSignedIn) {\r\n      this.props.signIn(this.auth.currentUser.get().getId());\r\n    } else {\r\n      this.props.signOut();\r\n    }\r\n  };\r\n\r\n  onSignInClick = () => {\r\n    this.auth.signIn();\r\n  };\r\n\r\n  onSignOutClick = () => {\r\n    this.auth.signOut();\r\n  };\r\n\r\n  renderAuthButton() {\r\n    if(this.props.isSignedIn === null) {\r\n      return null;\r\n    } else if(this.props.isSignedIn) {\r\n      return (\r\n        <button onClick={this.onSignOutClick} className=\"ui red google button\">\r\n          <i className=\"google icon\" />\r\n          Sign Out\r\n        </button>\r\n      );\r\n    } else {\r\n      return (\r\n        <button onClick={this.onSignInClick} className=\"ui red google button\">\r\n          <i className=\"google icon\" />\r\n          Sign In with Google\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <div>{this.renderAuthButton()}</div>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { isSignedIn: state.auth.isSignedIn };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signIn, signOut })(GoogleAuth);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport GoogleAuth from './GoogleAuth';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <div className=\"ui secondary pointing menu\">\r\n      <Link to=\"/\" className=\"item\">\r\n        Streamy\r\n      </Link>\r\n      <div className=\"right menu\">\r\n        <Link to=\"/\" className=\"item\">\r\n          All Streams\r\n        </Link>\r\n        <GoogleAuth />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport StreamCreate from './streams/StreamCreate';\r\nimport StreamEdit from './streams/StreamEdit';\r\nimport StreamDelete from './streams/StreamDelete';\r\nimport StreamList from './streams/StreamList';\r\nimport StreamShow from './streams/StreamShow';\r\nimport Header from './Header';\r\nimport history from '../history';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"ui container\">\r\n      <Router history={history}>\r\n        <div>\r\n          <Header />\r\n          <Switch>\r\n            <Route path=\"/\" exact component={StreamList} />\r\n            <Route path=\"/streams/new\" exact component={StreamCreate} />\r\n            <Route path=\"/streams/edit/:id\" exact component={StreamEdit} />\r\n            <Route path=\"/streams/delete/:id\" exact component={StreamDelete} />\r\n            <Route path=\"/streams/:id\" exact component={StreamShow} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const INITIAL_STATE = {\r\n  isSignedIn: null,\r\n  userId: null\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case 'SIGN_IN':\r\n      return { ...state, isSignedIn: true, userId: action.payload };\r\n    case 'SIGN_OUT':\r\n      return { ...state, isSignedIn: false, userId: null };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport authReducer from './authReducer';\r\nimport streamReducer from './streamReducer';\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  streams: streamReducer\r\n});\r\n","import _ from 'lodash';\r\n\r\nexport default ( state = {}, action ) => {\r\n  switch (action.type) {\r\n    case 'FETCH_STREAMS':\r\n      return { ...state, ..._.mapKeys(action.payload, 'id') };\r\n    case 'FETCH_STREAM':\r\n      return { ...state, [action.payload.id]: action.payload };\r\n    case 'CREATE_STREAM':\r\n      return { ...state, [action.payload.id]: action.payload };\r\n    case 'EDIT_STREAM':\r\n      return { ...state, [action.payload.id]: action.payload };\r\n    case 'DELETE_STREAM':\r\n      return _.omit(state, action.payload);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport reducers from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.querySelector('#root')\r\n);\r\n"],"sourceRoot":""}